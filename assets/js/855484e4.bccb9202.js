"use strict";(self.webpackChunkthothom_com=self.webpackChunkthothom_com||[]).push([[759],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,h=m["".concat(c,".").concat(d)]||m[d]||u[d]||i;return n?o.createElement(h,r(r({ref:t},p),{},{components:n})):o.createElement(h,r({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6373:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var o=n(7462),a=n(3366),i=(n(7294),n(3905)),r=["components"],l={sidebar_position:2},c="Globals",s={unversionedId:"overview/globals",id:"overview/globals",isDocsHomePage:!1,title:"Globals",description:"By default, ThothOM focus on keep all it's data encapsulated in the connection and repositories instances. It may be a problem depending on the architecture and the frameworks that you are using.",source:"@site/docs/overview/globals.md",sourceDirName:"overview",slug:"/overview/globals",permalink:"/docs/overview/globals",editUrl:"https://github.com/thothom/thothom.com/edit/master/docs/overview/globals.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"First Steps",permalink:"/docs/overview/first-steps"},next:{title:"Plugins",permalink:"/docs/overview/plugins"}},p=[{value:"Methods",id:"methods",children:[{value:"<code>setGlobalConnection</code>",id:"setglobalconnection",children:[],level:3},{value:"<code>getGlobalConnection</code>",id:"getglobalconnection",children:[],level:3},{value:"<code>getGlobalRepository</code>",id:"getglobalrepository",children:[],level:3}],level:2}],u={toc:p};function m(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"globals"},"Globals"),(0,i.kt)("p",null,"By default, ThothOM focus on keep all it's data encapsulated in the connection and repositories instances. It may be a problem depending on the architecture and the frameworks that you are using."),(0,i.kt)("p",null,"To facilitate this, you can define the connection instance globally, so you will have access to this in all parts of your system."),(0,i.kt)("h2",{id:"methods"},"Methods"),(0,i.kt)("h3",{id:"setglobalconnection"},(0,i.kt)("inlineCode",{parentName:"h3"},"setGlobalConnection")),(0,i.kt)("p",null,"The method used to define a global connection instance. You can define one or many connections instances globally."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'// database.connection.ts\n\nimport { setGlobalConnection } from "@thothom/core";\nimport { Connection } from "example-thothom-plugin";\n\nimport { ExampleEntity } from "./example.entity";\n\nconst bootstrap = async () => {\n  const connection = await new Connection({\n    // ... Put the extra connection options here\n    entities: [ExampleEntity], // All your entities should be here\n    databaseConfig: {\n      // The config to connect to the database\n    },\n  }).load();\n\n  // You always must call the `connect` method!\n  await connection.connect();\n\n  setGlobalConnection<Connection>(connection);\n};\n\nbootstrap();\n')),(0,i.kt)("h3",{id:"getglobalconnection"},(0,i.kt)("inlineCode",{parentName:"h3"},"getGlobalConnection")),(0,i.kt)("p",null,"The method is used to get a global connection. You must define the connection globally before call this method."),(0,i.kt)("p",null,"This method accepts a optional parameter, the connection name, that will be used to get the specific connection. By default, if any parameter is passed, it will return the default connection."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'// database.connection.ts\n\nimport { getGlobalConnection } from "@thothom/core";\nimport type { Connection } from "example-thothom-plugin";\n\n// ... Same example above\n\nsetGlobalConnection<Connection>(connection);\n\n// Will get the default connection\ngetGlobalConnection<Connection>();\n\n// Will get the specific connection\ngetGlobalConnection<Connection>("ConnectionName");\n')),(0,i.kt)("h3",{id:"getglobalrepository"},(0,i.kt)("inlineCode",{parentName:"h3"},"getGlobalRepository")),(0,i.kt)("p",null,"The method is used to get a repository from a global connection. You must define the connection globally before call this method."),(0,i.kt)("p",null,"This method accepts a second optional parameter, the connection name, that will be used to get the specific connection. By default, if this parameter isn't passed, it will return the default connection."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'// database.connection.ts\n\nimport { getGlobalRepository } from "@thothom/core";\n\n// ... Same example above\n\n// Will get a repository from the default connection\ngetGlobalRepository<ExampleEntity>(ExampleEntity);\n\n// Will get a repository from the specific connection\ngetGlobalRepository<ExampleEntity>(ExampleEntity, "ConnectionName");\n')))}m.isMDXComponent=!0}}]);